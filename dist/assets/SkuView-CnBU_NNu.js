import{I as v,d as G,a as g,A as K,e as o,o as m,p as b,w as t,b as e,i as r,h as z,V,k as p,t as y,c as h,F as N,n as I,J as S,_ as O}from"./index-kmnJ3fi5.js";const Q=(i,n)=>v.get(`/admin/product/list/${i}/${n}`),W=i=>v.get("/admin/product/onSale/"+i),X=i=>v.get("/admin/product/cancelSale/"+i),Y=i=>v.get("/admin/product/getSkuInfo/"+i),Z=i=>v.delete("/admin/product/deleteSku/"+i),ee=["src"],te=["src"],le=G({__name:"SkuView",setup(i){let n=g(1),x=g(10),q=g(0),C=g([]),k=g(!1),d=g({});K(()=>{_()});const _=async(u=1)=>{n.value=u;let l=await Q(n.value,x.value);l.code==200&&(q.value=l.data.total,C.value=l.data.records)},D=u=>{_()},L=async u=>{u.isSale==1?(await X(u.id),S({type:"success",message:"下架成功"}),_(n.value)):(await W(u.id),S({type:"success",message:"上架成功"}),_(n.value))},$=()=>{S({type:"success",message:"程序员在努力的更新中...."})},U=async u=>{k.value=!0;let l=await Y(u.id);d.value=l.data},E=async u=>{(await Z(u)).code==200?(S({type:"success",message:"删除成功"}),_(C.value.length>1?n.value:n.value-1)):S({type:"error",message:"系统数据不能删除"})};return(u,l)=>{const c=o("el-table-column"),w=o("el-button"),F=o("el-popconfirm"),M=o("el-table"),R=o("el-pagination"),s=o("el-col"),f=o("el-row"),A=o("el-tag"),T=o("el-carousel-item"),j=o("el-carousel"),H=o("el-drawer"),J=o("el-card");return m(),b(J,null,{default:t(()=>[e(M,{border:"",style:{margin:"10px 0px"},data:r(C)},{default:t(()=>[e(c,{label:"序号",type:"index",align:"center",width:"80px"}),e(c,{label:"名称","show-overflow-tooltip":"",width:"150px",prop:"skuName"}),e(c,{label:"描述","show-overflow-tooltip":"",width:"150px",prop:"skuDesc"}),e(c,{label:"图片",width:"150px"},{default:t(({row:a,$index:P})=>[z("img",{src:a.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,ee)]),_:1}),e(c,{label:"重量",width:"150px",prop:"weight"}),e(c,{label:"价格",width:"150px",prop:"price"}),e(c,{label:"操作",width:"250px",fixed:"right"},{default:t(({row:a,$index:P})=>[e(w,{type:"primary",size:"small",icon:a.isSale==1?"Bottom":"Top",onClick:B=>L(a)},null,8,["icon","onClick"]),e(w,{type:"primary",size:"small",icon:"Edit",onClick:$}),e(w,{type:"primary",size:"small",icon:"InfoFilled",onClick:B=>U(a)},null,8,["onClick"]),e(F,{title:`你确定要删除${a.skuName}?`,width:"200px",onConfirm:B=>E(a.id)},{reference:t(()=>[e(w,{type:"primary",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(R,{"current-page":r(n),"onUpdate:currentPage":l[0]||(l[0]=a=>V(n)?n.value=a:n=a),"page-size":r(x),"onUpdate:pageSize":l[1]||(l[1]=a=>V(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:r(q),onCurrentChange:_,onSizeChange:D},null,8,["current-page","page-size","total"]),e(H,{modelValue:r(k),"onUpdate:modelValue":l[2]||(l[2]=a=>V(k)?k.value=a:k=a)},{header:t(()=>l[3]||(l[3]=[z("h4",null,"查看商品的详情",-1)])),default:t(()=>[e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[4]||(l[4]=[p("名称")])),_:1}),e(s,{span:18},{default:t(()=>[p(y(r(d).skuName),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[5]||(l[5]=[p("描述")])),_:1}),e(s,{span:18},{default:t(()=>[p(y(r(d).skuDesc),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[6]||(l[6]=[p("价格")])),_:1}),e(s,{span:18},{default:t(()=>[p(y(r(d).price),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[7]||(l[7]=[p("平台属性")])),_:1}),e(s,{span:18},{default:t(()=>[(m(!0),h(N,null,I(r(d).skuAttrValueList,a=>(m(),b(A,{style:{margin:"5px"},key:a.id},{default:t(()=>[p(y(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[8]||(l[8]=[p("销售属性")])),_:1}),e(s,{span:18},{default:t(()=>[(m(!0),h(N,null,I(r(d).skuSaleAttrValueList,a=>(m(),b(A,{style:{margin:"5px"},key:a.id},{default:t(()=>[p(y(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[9]||(l[9]=[p("商品图片")])),_:1}),e(s,{span:18},{default:t(()=>[e(j,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(m(!0),h(N,null,I(r(d).skuImageList,a=>(m(),b(T,{key:a.id},{default:t(()=>[z("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,te)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),ne=O(le,[["__scopeId","data-v-045079f0"]]);export{ne as default};
