import{I as c,d as M,a as g,r as U,A as z,e as n,o as B,c as N,b as l,w as o,k as r,t as O,h as j,F as D,J as V}from"./index-kmnJ3fi5.js";const E=()=>c.get("/admin/acl/permission"),F=m=>m.id?c.put("/admin/acl/permission/update",m):c.post("/admin/acl/permission/save",m),T={class:"dialog-footer"},I=M({__name:"PermissiorView",setup(m){const f=g([]),i=g(!1),a=U({code:"",name:"",level:0,pid:0});z(()=>{p()});const p=async()=>{const s=await E();s.code==200&&(f.value=s.data)},C=s=>{Object.assign(a,{id:0,code:"",name:"",level:0,pid:0}),i.value=!0,a.level=s.level+1,a.pid=s.id},k=s=>{i.value=!0,Object.assign(a,s)},x=async()=>{(await F(a)).code==200&&(i.value=!1,V({type:"success",message:a.id?"更新成功":"添加成功"}),p())},_=async s=>{(await _()).code==200&&(V({type:"success",message:"删除成功"}),p())};return(s,e)=>{const u=n("el-table-column"),d=n("el-button"),P=n("el-popconfirm"),$=n("el-table"),v=n("el-input"),b=n("el-form-item"),q=n("el-form"),A=n("el-dialog");return B(),N(D,null,[l($,{data:f.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:o(()=>[l(u,{prop:"name",label:"名称"}),l(u,{prop:"code",label:"权限值"}),l(u,{prop:"updateTime",label:"修改时间"}),l(u,{label:"操作"},{default:o(({row:t,$index:w})=>[l(d,{type:"primary",size:"small",disabled:t.level==4,onClick:y=>C(t)},{default:o(()=>[r(O(t.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"]),l(d,{type:"primary",size:"small",disabled:t.level==1,onClick:y=>k(t)},{default:o(()=>e[4]||(e[4]=[r("编辑")])),_:2},1032,["disabled","onClick"]),l(P,{title:`你确定要删除${t.name}吗?`,width:"260px"},{reference:o(()=>[l(d,{type:"primary",size:"small",disabled:t.level==1,onConfirm:y=>_(t.id)},{default:o(()=>e[5]||(e[5]=[r("删除")])),_:2},1032,["disabled","onConfirm"])]),_:2},1032,["title"])]),_:1})]),_:1},8,["data"]),l(A,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),title:""},{footer:o(()=>[j("div",T,[l(d,{onClick:e[2]||(e[2]=t=>i.value=!1)},{default:o(()=>e[6]||(e[6]=[r("取消")])),_:1}),l(d,{type:"primary",onClick:x},{default:o(()=>e[7]||(e[7]=[r(" 确定 ")])),_:1})])]),default:o(()=>[l(q,null,{default:o(()=>[l(b,{label:"名称"},{default:o(()=>[l(v,{placeholder:"请你输入菜单名称",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.name=t)},null,8,["modelValue"])]),_:1}),l(b,{label:"权限值"},{default:o(()=>[l(v,{placeholder:"请你输入权限值",modelValue:a.code,"onUpdate:modelValue":e[1]||(e[1]=t=>a.code=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{I as default};
